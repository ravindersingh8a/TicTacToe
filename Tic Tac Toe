#include<stdio.h>

char initBoard[9] = { '1', '2', '3', '4', '5', '6', '7', '8', '9' };
int magicsquare[9] = { 2, 7, 6, 9, 5, 1, 4, 3, 8 };

int b, j = 0;
int xa[9];
int oa[9];
void
display_board ()
{
  printf ("\n\n");
  printf ("\t\t\t  %c | %c  | %c  \n", initBoard[0], initBoard[1], initBoard[2]);
  printf ("\t\t\t--------------\n");
  printf ("\t\t\t  %c | %c  | %c  \n", initBoard[3], initBoard[4], initBoard[5]);
  printf ("\t\t\t--------------\n");
  printf ("\t\t\t  %c | %c  | %c  \n\n", initBoard[6], initBoard[7], initBoard[8]);

}

void
display_turnX ()
{
  int a;
  printf ("Your Turn Please Choose Position ");
  scanf ("%d", &a);
  a = a - 1;
  if (initBoard[a] != 'X' && initBoard[a] != 'O')
    {
      initBoard[a] = 'X';
      xa[j] = magicsquare[a];
      j++;
      printf ("magic sqaure value is %d", xa[j - 1]);
      display_board ();
      gamefinish ();
      if (b != 1)
	{
	  display_turnO ();
	}
    }
  else
    {
      printf ("Position is taken  Please Try another position \n");
      display_turnX ();
    }

}

void
display_turnO ()
{
  int i, a;
  int b = 0;
  printf ("Computer Choose Position : ");
  for (i = 0; i < 9; i++)
    {
      b = b + xa[i];
    }
  int mg = 15 - b;
  for (i = 0; i < 9; i++)
    {
      if ( magicsquare[i] == mg)
	{
	  a = i;
	}
    }
  printf ("%d", a);
  if (initBoard[a] != 'X' && initBoard[a] != 'O')
    {
      initBoard[a] = 'O';
      display_board ();
      gamefinish ();
      if (b != 1)
	{
	  display_turnX ();
	}
    }
  else
    {
      printf ("Position is taken  Please Try another position \n ");
      display_turnO ();

    }
}

void
gamefinish ()
{
  if (initBoard[0] == initBoard[1] && initBoard[0] == initBoard[2])
    {
      printf ("Player %c Wins ", initBoard[0]);
      b = 1;
    }
  if (initBoard[3] == initBoard[4] && initBoard[3] == initBoard[5])
    {
      printf ("Player %c Wins ", initBoard[3]);
      b = 1;
    }
  if (initBoard[6] == initBoard[7] && initBoard[6] == initBoard[8])
    {
      printf ("Player %c Wins ", initBoard[6]);
      b = 1;
    }
  if (initBoard[0] == initBoard[3] && initBoard[0] == initBoard[6])
    {
      printf ("Player %c Wins ", initBoard[0]);
      b = 1;
    }
  if (initBoard[1] == initBoard[4] && initBoard[1] == initBoard[7])
    {
      printf ("Player %c Wins ", initBoard[1]);
      b = 1;
    }
  if (initBoard[2] == initBoard[5] && initBoard[2] == initBoard[8])
    {
      printf ("Player %c Wins ", initBoard[2]);
      b = 1;
    }
  if (initBoard[0] == initBoard[4] && initBoard[0] == initBoard[8])
    {
      printf ("Player %c Wins ", initBoard[0]);
      b = 1;
    }
  if (initBoard[2] == initBoard[4] && initBoard[2] == initBoard[6])
    {
      printf ("Player %c Wins ", initBoard[2]);
      b = 1;
    }
}

void
main ()
{
  printf
    ("\t\t\tTic-Tac-Toe \n\n Choose a cell numbered from 1 to 9 as below and play \n\n Player : X \n Computer : O");

  display_board ();
  display_turnX ();
}
